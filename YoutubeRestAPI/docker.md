# Docker란?

### Docker의 특징

### 확장성/이식성

- 도커가 설치되어 있다면 어디서든 컨테이너를 실행할 수 있음
- 특정 회사나 서비스에 종속적이지 않음
- 쉽게 개발 서버를 만들 수 있고 테스트 서버 생성도 간편함

### 표준성

- 도커를 사용하지 않는 경우, ruby, nodejs, go, php등 으로 만든 서비스들의 배포 방식은 제각각 다름
- 컨테이너라는 표준으로 서버를 배포하므로 모든 서버들의 배포 과정이 동일해짐

### 이미지

- 이미지에서 컨테이너를 생성하기 때문에 반드시 이미지를 만드는 과정이 필요
- Dockerfile을 이용하여 이미지를 만들고 처음부터 재현 가능
- 빌드 서버에서 이미지를 만들면 해당 이미지를 이미지 저장소에 저장하고 운영 버에서 이미지를 불러옴

### 설정 관리

- 설정은 보통 환경 변수로 제어함
- MYSQL_PASS=password와 같이 컨테이너를 띄울 때 환경 변수를 같이 지정
- 하나의 이미지가 환경 변수에 따라 동적으로 설정 파일을 생성하도록 만들어져야 함

### 자원 관리

- 컨테이너는 삭제 후 새로 만들면 모든 데이터가 초기화 됨
- 업로드 파일을 외부 스토리지와 링크하여 사용하거나 S3같은 별도의 저장소가 필요
- 세션이나 캐시를 memcaxhed나 redis와 같은 외부로 분리

### 도커가 가져온 변화

- 클라우드 이미지보다 관리하기 쉬움
- 다른 프로세스와 격리되어 가상 머신처럼 사용하지만 성능 저하는 거의 없음
- 복잡한 기술(namesapece, cgroups, network, 등)을 몰라도 사용할 수 있음
- 이미지 빌드 기록이 남음
- 코드와 설정으로 관리 > 재현 및 수정 가능
- 오픈소스 > 특정 회사 기술에 종속적이지 않음

# Docker 구성요소

Docker는 클라이언트-서버 아키텍처를 사용합니다. Docker 클라이언트는 Docker 컨테이너를 구축, 실행 및 배포하는 무거운 작업을 수행하는 Docker 데몬과 통신합니다. Docker 클라이언트와 데몬은 동일한 시스템에서 실행될 수도 있고 Docker 클라이언트를 원격 Docker 데몬에 연결할 수도 있습니다. Docker 클라이언트와 데몬은 UNIX 소켓 또는 네트워크 인터페이스를 통해 REST API를 사용하여 통신합니다. 또 다른 Docker 클라이언트는 Docker Compose로, 이를 통해 컨테이너 세트로 구성된 애플리케이션으로 작업할 수 있습니다.

### 도커 데몬
Docker 데몬( dockerd)은 Docker API 요청을 수신하고 이미지, 컨테이너, 네트워크, 볼륨과 같은 Docker 개체를 관리합니다. 데몬은 Docker 서비스를 관리하기 위해 다른 데몬과 통신할 수도 있습니다.

### 도커 클라이언트
Docker 클라이언트( docker)는 많은 Docker 사용자가 Docker와 상호 작용하는 기본 방법입니다. 와 같은 명령을 사용하면 docker run클라이언트는 이러한 명령을 에 보내고 dockerd이를 수행합니다. 이 docker명령은 Docker API를 사용합니다. Docker 클라이언트는 둘 이상의 데몬과 통신할 수 있습니다.

### 도커 데스크탑
Docker Desktop은 컨테이너화된 애플리케이션과 마이크로서비스를 구축하고 공유할 수 있는 Mac, Windows 또는 Linux 환경을 위한 설치가 쉬운 애플리케이션입니다. Docker Desktop에는 Docker 데몬( dockerd), Docker 클라이언트( docker), Docker Compose, Docker Content Trust, Kubernetes 및 자격 증명 도우미가 포함되어 있습니다. 자세한 내용은 Docker 데스크탑을 참조하세요 .

### 도커 레지스트리
Docker 레지스트리는 Docker 이미지를 저장합니다. Docker Hub는 누구나 사용할 수 있는 공개 레지스트리이며 Docker는 기본적으로 Docker Hub에서 이미지를 찾습니다. 자신만의 개인 레지스트리를 실행할 수도 있습니다.

docker pull또는 명령 을 사용하면 docker runDocker는 구성된 레지스트리에서 필요한 이미지를 가져옵니다. 명령 을 사용하면 docker pushDocker는 이미지를 구성된 레지스트리에 푸시합니다.


# Docker Image와 Docker Container

### 도커 객체
Docker를 사용하면 이미지, 컨테이너, 네트워크, 볼륨, 플러그인 및 기타 객체를 생성하고 사용하게 됩니다. 이 섹션에서는 이러한 개체 중 일부에 대한 간략한 개요를 제공합니다.

#### 이미지
이미지는 Docker 컨테이너를 생성하기 위한 지침이 포함된 읽기 전용 템플릿입니다. 종종 이미지는 일부 추가 사용자 정의가 포함된 다른 이미지를 기반으로 합니다. 예를 들어, 이미지를 기반으로 하는 이미지를 빌드할 수 있지만 ubuntu Apache 웹 서버와 애플리케이션은 물론 애플리케이션을 실행하는 데 필요한 구성 세부 정보도 설치됩니다.

자신만의 이미지를 만들 수도 있고, 다른 사람이 만들고 레지스트리에 게시한 이미지만 사용할 수도 있습니다. 자신만의 이미지를 빌드하려면 이미지를 생성하고 실행하는 데 필요한 단계를 정의하기 위한 간단한 구문을 사용하여 Dockerfile을 생성합니다. Dockerfile의 각 명령은 이미지에 레이어를 생성합니다. Dockerfile을 변경하고 이미지를 다시 빌드하면 변경된 레이어만 다시 빌드됩니다. 이는 다른 가상화 기술과 비교할 때 이미지를 매우 가볍고 작고 빠르게 만드는 이유 중 하나입니다.

#### 컨테이너
컨테이너는 실행 가능한 이미지 인스턴스입니다. Docker API 또는 CLI를 사용하여 컨테이너를 생성, 시작, 중지, 이동 또는 삭제할 수 있습니다. 컨테이너를 하나 이상의 네트워크에 연결하거나, 컨테이너에 스토리지를 연결하거나, 현재 상태를 기반으로 새 이미지를 생성할 수도 있습니다.

기본적으로 컨테이너는 다른 컨테이너 및 해당 호스트 시스템과 비교적 잘 격리되어 있습니다. 컨테이너의 네트워크, 스토리지 또는 기타 기본 하위 시스템이 다른 컨테이너 또는 호스트 시스템으로부터 얼마나 격리되는지 제어할 수 있습니다.

컨테이너는 해당 이미지와 컨테이너를 생성하거나 시작할 때 제공하는 구성 옵션으로 정의됩니다. 컨테이너가 제거되면 영구 저장소에 저장되지 않은 상태에 대한 모든 변경 사항이 사라집니다.


[references]('https://docs.docker.com/get-started/overview/)